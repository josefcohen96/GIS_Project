		// Function to fetch the JSON file
		function fetchJSON(callback) {
			fetch('/events.json')
				.then(response => response.json())
				.then(data => callback(data))
				.catch(error => console.error(error));
		}

		// Function to initialize the map and display party locations
		function initMap() {
			const map = L.map('map').fitWorld(); // Adjusts the map view to fit all markers
			L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				attribution: 'Map data Â© <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',
				maxZoom: 18
			}).addTo(map);

			fetchJSON(data => {
				const markers = [];
				data.parties.forEach(party => {
					console.log(party);
					const marker = L.marker([party.coordinates.latitude, party.coordinates.longitude]).addTo(map);
					const startTime = new Date(party.start_time).toLocaleTimeString([], { timeStyle: 'short' });
					const endTime = new Date(party.end_time).toLocaleTimeString([], { timeStyle: 'short' });
					marker.bindPopup(`<b>${party.name}</b><br>${party.date}<br>${startTime} - ${endTime}`);
					markers.push(marker);
				});

				// Fit the map view to include all markers
				const group = new L.featureGroup(markers);
				map.fitBounds(group.getBounds());
			});
		}

		// Call the initMap function when the DOM is ready
		document.addEventListener('DOMContentLoaded', initMap);